
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>3. A Kind Of Quick Guide To EVerest &#8212; EVerest  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxdoc.css" />
    <link rel="stylesheet" type="text/css" href="../_static/contentui.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/contentui.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. EVerest Modules in Detail" href="04_detail_module_concept.html" />
    <link rel="prev" title="2. Prepare Your Development Environment" href="02_detail_pre_setup.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="04_detail_module_concept.html" title="4. EVerest Modules in Detail"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="02_detail_pre_setup.html" title="2. Prepare Your Development Environment"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">EVerest  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3. </span>A Kind Of Quick Guide To EVerest</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="a-kind-of-quick-guide-to-everest">
<span id="quickstartguide-main"></span><h1><span class="section-number">3. </span>A Kind Of Quick Guide To EVerest<a class="headerlink" href="#a-kind-of-quick-guide-to-everest" title="Permalink to this heading">¶</a></h1>
<section id="prepare-your-development-environment">
<h2><span class="section-number">3.1. </span>Prepare Your Development Environment<a class="headerlink" href="#prepare-your-development-environment" title="Permalink to this heading">¶</a></h2>
<section id="needed-packages">
<h3><span class="section-number">3.1.1. </span>Needed Packages<a class="headerlink" href="#needed-packages" title="Permalink to this heading">¶</a></h3>
<p>You will need Python, Jinja2, PyYAML, a compiler and some more system libraries
set up. If not already done, see the detailed page for
<a class="reference internal" href="02_detail_pre_setup.html#preparedevenv-main"><span class="std std-ref">setting up your development environment</span></a>.</p>
<p>After having created your environment, we can go on downloading and installing
EVerest.</p>
</section>
</section>
<section id="download-and-install">
<span id="quickstartguide-download-install"></span><h2><span class="section-number">3.2. </span>Download And Install<a class="headerlink" href="#download-and-install" title="Permalink to this heading">¶</a></h2>
<section id="get-the-needed-everest-repositories">
<h3><span class="section-number">3.2.1. </span>Get The Needed EVerest Repositories<a class="headerlink" href="#get-the-needed-everest-repositories" title="Permalink to this heading">¶</a></h3>
<section id="everest-dependency-manager-edm">
<h4><span class="section-number">3.2.1.1. </span>EVerest Dependency Manager - edm<a class="headerlink" href="#everest-dependency-manager-edm" title="Permalink to this heading">¶</a></h4>
<p>As EVerest is highly modular, you will need multiple repos, which can be found
on GitHub.</p>
<p>To get the right repos as needed, the EVerest Dependency Manager - short
<cite>edm</cite> - will help you.</p>
<p>To start with that, let’s get <cite>edm</cite> ready to work.</p>
<p>You will first of all need to pull <cite>everest-dev-environment</cite> to your
development environment.</p>
<p>Python and its tools pip, setuptools and wheel have already been installed in
the Prerequisites section above. So, you can pull the said repository and
install the dependency manager, which will reside inside of <cite>.local/bin/</cite> in
your HOME directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/EVerest/everest-dev-environment
<span class="nb">cd</span><span class="w"> </span>everest-dev-environment/dependency_manager
python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.
</pre></div>
</div>
<p>The EVerest dependency manager uses
<a class="reference external" href="https://github.com/cpm-cmake/CPM.cmake">CPM</a> for its CMake integration.
This means you can and should set the <cite>CPM_SOURCE_CACHE</cite> environment variable.
This makes sure that dependencies that you do not manage in the workspace are
not re-downloaded multiple times. For detailed information and other useful
environment variables please refer to the
<a class="reference external" href="https://github.com/cpm-cmake/CPM.cmake/blob/master/README.md#CPM_SOURCE_CACHE">CPM Documentation</a>.</p>
<p>Also set the PATH variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">CPM_SOURCE_CACHE</span><span class="o">=</span><span class="nv">$HOME</span>/.cache/CPM
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/home/<span class="k">$(</span>whoami<span class="k">)</span>/.local/bin
</pre></div>
</div>
<p>To let edm prepare the most common repos for a simple start with EVerest,
let us use a default config file and set a workspace directory for the repos.
Set your preferred directory instead of <cite>{EVerest Workspace Directory}</cite>, e.g.
use <cite>~/checkout/everest-workspace</cite>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>edm<span class="w"> </span>init<span class="w"> </span>--workspace<span class="w"> </span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>
</pre></div>
</div>
<p>(In future, as your system has <cite>edm</cite> properly set up, you can always
initialise a new workspace by calling <cite>edm init</cite>.)</p>
<p>edm will now prepare the most common repos to start with. It will also create a
YAML file which describes your newly created workspace. You can change that
YAML file later if you want to adopt the workspace to another scenario.</p>
<p>The YAML file can be found in the directory which you have chosen as workspace
directory. In the above example, it is located at
<cite>{EVerest Workspace Directory}</cite>.</p>
<p>More details about edm, see the dedicated
<a class="reference internal" href="../dev_tools/edm.html#edm-main"><span class="std std-ref">edm page in this documentation</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want EVerest to pull its own dependencies (which is recommended),
remove all folders in <cite>{EVerest Workspace Directory}</cite> except for
everest-core, everest-dev-environment, everest-utils and Josev. Those will
be needed later on.</p>
<p>Doing this ensures that during the compilation of everest-core all
dependencies are downloaded automatically.</p>
</div>
</section>
<section id="everest-command-line-interface-ev-cli">
<h4><span class="section-number">3.2.1.2. </span>EVerest Command Line Interface: <code class="docutils literal notranslate"><span class="pre">ev-cli</span></code><a class="headerlink" href="#everest-command-line-interface-ev-cli" title="Permalink to this heading">¶</a></h4>
<p>In its current version, <code class="docutils literal notranslate"><span class="pre">ev-cli</span></code> supports you by generating module templates.
It is also necessary to build EVerest.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The latter one is already satisfied by an automatic installation in a python venv during
the build process. To use this installation also for generating module files you can
source it as explained <a class="reference internal" href="../dev_tools/ev_cli.html#evcli-install"><span class="std std-ref">here</span></a>.</p>
</div>
<p>To install it manually run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>/everest-utils/ev-dev-tools
python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.
</pre></div>
</div>
<p>That is all to install <code class="docutils literal notranslate"><span class="pre">ev-cli</span></code>. You can find the binary file in your
HOME directory in <cite>.local/bin/</cite>.</p>
<p>In a later step, we will use <code class="docutils literal notranslate"><span class="pre">ev-cli</span></code> to create module stubs.</p>
</section>
</section>
<section id="build-everest">
<h3><span class="section-number">3.2.2. </span>Build EVerest<a class="headerlink" href="#build-everest" title="Permalink to this heading">¶</a></h3>
<p>Now it is time to build EVerest:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>/everest-core
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>..
make<span class="w"> </span>install
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>In case you have more than one CPU core and more RAM availble you can use the
following command to significantly speed up the build process:</p>
<p><em>make -j$(nproc) install</em></p>
<p><em>$(nproc)</em> puts out the core count of your machine, so it is using all
available CPU cores. You can also specify any number of CPU cores you like.</p>
</div>
<p>edm helped you to keep it that simple. Let’s now dive into simulating our
current workspace.</p>
<p>If you get an error during the build process stating that ev-cli is installed
in an old version, go to your everest workspace directory and call <em>edm
–git-pull</em>. This will update the EVerest repositories. After that, repeat
building ev-cli and you should be good to go again.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>This error shouldn’t occur if <code class="docutils literal notranslate"><span class="pre">ev-cli</span></code> is installed automatically during the build process.
It is highly recommended to always use the automatic installed <code class="docutils literal notranslate"><span class="pre">ev-cli</span></code> version, since this
is specified by the <cite>dependencies.yaml</cite> and verified by ci workflow.</p>
</div>
</section>
</section>
<section id="simulating-everest">
<span id="quickstartguide-simulate"></span><h2><span class="section-number">3.3. </span>Simulating EVerest<a class="headerlink" href="#simulating-everest" title="Permalink to this heading">¶</a></h2>
<section id="prepare-the-helpers">
<span id="quickstartguide-helpers"></span><h3><span class="section-number">3.3.1. </span>Prepare The Helpers<a class="headerlink" href="#prepare-the-helpers" title="Permalink to this heading">¶</a></h3>
<p>EVerest comes with prepared Docker containers. The one that starts Mosquitto
(an MQTT broker) is required to run EVerest. This documentation section shows
the necessary steps to start the simulation and get the user interface running.</p>
<p>Further tools are not required to run EVerest (e.g. SteVe for OCPP). Further
information about EVerest Docker containers can be found on the
<a class="reference internal" href="../tutorials/docker_setup.html#docker-setup"><span class="std std-ref">EVerest Docker Setup page</span></a>.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>To get all this working, make sure you have docker and docker-compose installed during the previous install phase. (If not, see install instructions for <a class="reference external" href="https://docs.docker.com/engine/install/#server">docker</a> and <a class="reference external" href="https://docs.docker.com/compose/install/#install-compose)">docker-compose</a>!)</p>
</div>
<p>In order for custom or local containers being able to talk to the services,
provided by the docker-compose containers, we need to create a common docker
network. It is called <cite>infranet_network</cite> and needs to be created by the
following command (IPv6 is enabled for containers which might need it):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>--driver<span class="w"> </span>bridge<span class="w"> </span>--ipv6<span class="w">  </span>--subnet<span class="w"> </span>fd00::/80<span class="w"> </span>infranet_network<span class="w"> </span>--attachable
</pre></div>
</div>
<p>Now, start the mosquitto broker, which is deployed as built docker image.
It is used for the communication between the EVerest modules:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>mqtt-server<span class="w"> </span>--network<span class="w"> </span>infranet_network<span class="w"> </span>-p<span class="w"> </span><span class="m">1883</span>:1883<span class="w"> </span>-p<span class="w"> </span><span class="m">9001</span>:9001<span class="w"> </span>ghcr.io/everest/everest-dev-environment/mosquitto:docker-images-v0.1.0
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">-d</span></code> starts the container in detached mode.</p>
<p><code class="docutils literal notranslate"><span class="pre">--name</span> <span class="pre">mqtt-server</span></code> gives the container a name.</p>
<p><code class="docutils literal notranslate"><span class="pre">--network</span> <span class="pre">infranet_network</span></code> connects the container to the network we created.</p>
<p><code class="docutils literal notranslate"><span class="pre">--expose</span> <span class="pre">1883</span> <span class="pre">--expose</span> <span class="pre">9001</span></code> makes the ports 1883 and 9001 available to the
other containers in the network.</p>
<p><code class="docutils literal notranslate"><span class="pre">ghcr.io/everest/everest-dev-environment/mosquitto:docker-images-v0.1.0</span></code> is the complete image name</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The docker container can be controlled with docker compose as well:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/EVerest/everest-dev-environment.git
<span class="nb">cd</span><span class="w"> </span>everest-dev-environment/docker
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>mosquitto
</pre></div>
</div>
</div>
<p>That makes us ready for entering the simulation phase described in the next
chapter.</p>
</section>
<section id="software-in-a-loop">
<h3><span class="section-number">3.3.2. </span>Software in a loop<a class="headerlink" href="#software-in-a-loop" title="Permalink to this heading">¶</a></h3>
<p>In the following, we will start EVerest as a simple AC charging station with
software-in-the-loop configuration. This means that all hardware related
parts like Powermeter, RFID-Reader or even actual Electric Vehicles are
loaded as simulated modules.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Make sure you have prepared the helpers necessary for simulating EVerest as
shown in the <a class="reference internal" href="#quickstartguide-helpers"><span class="std std-ref">previous section</span></a>.</p>
</div>
<p>Change to the directory <cite>everest-core/build</cite>, which has been created during
EVerest install.</p>
<p>Start EVerest with a software-in-the-loop configuration via script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>/everest-core/build/run-scripts/run-sil.sh
</pre></div>
</div>
<p>In a new terminal window, run the following Node-RED script. If you are not
logged in as root, you will need to run this via <cite>sudo</cite>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>/everest-core/build/run-scripts/nodered-sil.sh
</pre></div>
</div>
<p>For a user interface, just direct your browser to <a class="reference external" href="http://localhost:1880/ui">http://localhost:1880/ui</a>
- the required web-server has already been started via the shell scripts.</p>
<p>This will let us control the simulation in a very simple GUI.</p>
<p>You can analyse the output of the two shell scripts in the terminal windows to
get a little bit of insights about what is going on and which ports are used
etc.</p>
<p>In the GUI, you can simulate car charging sessions using the available buttons,
e.g. <cite>CAR PLUGIN</cite>, <cite>PAUSE</cite>, <cite>RESUME</cite> and so on:</p>
<a class="reference internal image-reference" href="../_images/quick-start-sil-gui.png"><img alt="../_images/quick-start-sil-gui.png" src="../_images/quick-start-sil-gui.png" style="width: 200px;" /></a>
<p>Having a very first basic feeling for that will be enough for now. We are
preparing a module tutorial, in which we will dig deeper into things.</p>
</section>
<section id="admin-panel-and-simulations">
<h3><span class="section-number">3.3.3. </span>Admin panel and simulations<a class="headerlink" href="#admin-panel-and-simulations" title="Permalink to this heading">¶</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Be aware, that the Admin Panel is currently under development.
The former version of the Admin Panel, which was integrated in EVerest,
will be removed. See the new standalone version which runs without an
EVerest instance here:
<a class="reference external" href="https://github.com/EVerest/everest-admin-panel">Admin Panel GitHub repository</a>
.</p>
</div>
<p>You can glue together the modules of EVerest (and also your custom ones) with
the help of EVerest’s framework mechanisms. This way, you define simulation
flows with which you can test and analyze complicated systems.</p>
<p>As EVerest is a modular framework, you can define connections and data flows
in a nice network of modules. As it would be a little bit exhausting to
configure everything via code or config files, there is a nice helper: The
admin panel.</p>
<p>It gives you an overview of modules and connections between them. In a
diagram, you can see and understand the simulation with all interfaces,
configs, data flows and so on.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See
<a class="reference external" href="https://github.com/EVerest/everest-admin-panel">Admin Panel GitHub repository</a>
for information about how to start the Admin Panel. The screenshots and the
documentation in this subsection might be different than what you see on
your screen. This is due to the currently ongoing changes in the Admin
Panel. This will be updated soon.</p>
</div>
<p>You should see a rather empty page like that:</p>
<a class="reference internal image-reference" href="../_images/quick-start-admin-panel-1.png"><img alt="../_images/quick-start-admin-panel-1.png" src="../_images/quick-start-admin-panel-1.png" style="width: 360px;" /></a>
<p>Click on the menu symbol on the upper left corner of the page, then click on
config. A left side column with further menu items opens. Choose <cite>Available
configs</cite>:</p>
<a class="reference internal image-reference" href="../_images/quick-start-admin-panel-2.png"><img alt="../_images/quick-start-admin-panel-2.png" src="../_images/quick-start-admin-panel-2.png" style="width: 360px;" /></a>
<p>If you are here for the first time, you will see all pre-configured Node-RED
flows here. For a first intro, you may want to take a look at <em>config-sil</em>.</p>
<p>After opening it, you can see a diagram representation of some modules with
connections between them.</p>
<p>The role of each module in this system and how to configure an EVerest module
environment with the Admin Panel will be explained on page
<a class="reference internal" href="05_existing_modules.html#existing-modules-main"><span class="std std-ref">EVerest Modules</span></a>.</p>
<p>To see how to create your own custom flows for simulations, visit the
<a class="reference internal" href="../tutorials/run_sil/index.html#tutorial-sil-main"><span class="std std-ref">Tutorial for simulating EVerest</span></a>.</p>
<p>Next, let’s see how fast we can create a new module in EVerest.</p>
</section>
</section>
<section id="understanding-everest-modules">
<span id="quickstartguide-modulesetup"></span><h2><span class="section-number">3.4. </span>Understanding EVerest Modules<a class="headerlink" href="#understanding-everest-modules" title="Permalink to this heading">¶</a></h2>
<p>You reached the phase of writing a new EVerest module. Congrats!</p>
<p>For this Quick Start Guide, we will give you a rocket start of understanding
the basic elements of the EVerest module concept.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Modules can be implemented in C++, Javascript, Python or Rust.
We will stick to C++ in the examples below.</p>
</div>
<p>So, let’s dig into the overview:</p>
<p>EVerest is a modular framework. So, there are lots of modules for different
entities in an EVerest workspace:</p>
<ul class="simple">
<li><p>EvseManager (a charging port as part of a charging station)</p></li>
<li><p>Hardware driver modules</p></li>
<li><p>Protocol implementations</p></li>
<li><p>Car simulation modules</p></li>
<li><p>Authentication modules</p></li>
<li><p>Energy management modules</p></li>
</ul>
<p>and so on.</p>
<p>Of course, you can change the functionality of those modules or add your
custom ones to the whole module stack.</p>
<p>In very short terms, a new module will be created by describing its structure
via manifest and interface files. After that, an EVerest helper tool will
create the necessary files as stub files, so that you can implement the
details. The EVerest framework will also know how the modules can be connected
by the restrictions you set in the manifest.</p>
<p>How does all that look like? Read the next section!</p>
<section id="basic-elements-of-a-module">
<h3><span class="section-number">3.4.1. </span>Basic elements of a module<a class="headerlink" href="#basic-elements-of-a-module" title="Permalink to this heading">¶</a></h3>
<section id="module-manifest">
<h4><span class="section-number">3.4.1.1. </span>Module manifest<a class="headerlink" href="#module-manifest" title="Permalink to this heading">¶</a></h4>
<p>Let’s look at the first step: Describing the structure of a new module.
Starting with the manifest file, which could look like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Describing what this module does.</span>
<span class="linenos"> 2</span><span class="nt">config</span><span class="p">:</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">some_key</span><span class="p">:</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Describe the effect of this config key.</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="linenos"> 7</span><span class="nt">provides</span><span class="p">:</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="nt">main</span><span class="p">:</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="nt">interface</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myinterface</span>
<span class="linenos">10</span><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Describe what the implementation of this interface does.</span>
<span class="linenos">11</span><span class="nt">requires</span><span class="p">:</span>
<span class="linenos">12</span><span class="w">  </span><span class="nt">some_implementation</span><span class="p">:</span>
<span class="linenos">13</span><span class="w">    </span><span class="nt">interface</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">externalinterface</span>
<span class="linenos">14</span><span class="w">    </span><span class="nt">min_connections</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="linenos">15</span><span class="w">    </span><span class="nt">max_connections</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="linenos">16</span><span class="nt">enable_external_mqtt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="linenos">17</span><span class="nt">metadata</span><span class="p">:</span>
<span class="linenos">18</span><span class="w">  </span><span class="nt">license</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://spdx.org/licenses/Apache-2.0.html</span>
<span class="linenos">19</span><span class="w">  </span><span class="nt">authors</span><span class="p">:</span>
<span class="linenos">20</span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Your name, your company</span>
</pre></div>
</div>
<p>Most of this should be self-explanatory. Just a few words:</p>
<p>The config section gives you the possbility to define some config keys for the
module to re-use it for different scenarios in your workspace.</p>
<p>In line 7, the <em>provides</em> section let’s you tell other modules what your
module is able to do. You tell the EVerest module framework which interfaces
have been implemented - for example, a power meter. Of course, you can
implement more than only one interface and list all of that in the <em>provides</em>
section.</p>
<p>Line 11 starts with the requirements of your own module. This is the other
side: Your module tells the EVerest module framework which implementations it
will require to work in the EVerest workspace.</p>
<p>With the <cite>min_connections</cite> and <cite>max_connections</cite> key you can configure how
many connections are required or allowed for your module.</p>
<p>In EVerest, you find a manifest file for each module. See the module
directories in <em>{EVerest Workspace Directory}/everest-core/modules</em>.</p>
</section>
<section id="interfaces">
<h4><span class="section-number">3.4.1.2. </span>Interfaces<a class="headerlink" href="#interfaces" title="Permalink to this heading">¶</a></h4>
<p>An interface describes - like a kind of construction manual - which information
it delivers and which functionality it provides for other modules to use.</p>
<p>A module, that implements an interface, publishes information via VARs (short
for variables). VARs can be consumed by connected modules. Functionality is
provided by CMDs (commands, that can be called from other modules).</p>
<p>VARs and CMDs are defined in the interface files. Remember the manifest file?
The previous section showd that the manifest file defines which interfaces your
module implements. Those interfaces could already exist. If not, you would have
to create a new one.</p>
<p>You can find all interfaces in the directory
<em>{EVerest Workspace Directory}/everest-core/interfaces</em> as yaml files.</p>
<p>An easy one as an example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Describe why we need this interface.</span>
<span class="linenos"> 2</span><span class="nt">cmds</span><span class="p">:</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">get_id</span><span class="p">:</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Describe what this command does when called.</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="nt">arguments</span><span class="p">:</span>
<span class="linenos"> 6</span><span class="w">      </span><span class="nt">verbose</span><span class="p">:</span>
<span class="linenos"> 7</span><span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">An example for a method argument.</span>
<span class="linenos"> 8</span><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="nt">result</span><span class="p">:</span>
<span class="linenos">10</span><span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Explain the return value.</span>
<span class="linenos">11</span><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<span class="linenos">12</span><span class="nt">vars</span><span class="p">:</span>
<span class="linenos">13</span><span class="w">  </span><span class="nt">temperature</span><span class="p">:</span>
<span class="linenos">14</span><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Describe this value that gets published.</span>
<span class="linenos">15</span><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<span class="linenos">16</span><span class="w">  </span><span class="nt">limits</span><span class="p">:</span>
<span class="linenos">17</span><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Describe this struct that gets published.</span>
<span class="linenos">18</span><span class="w">    </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/typedef#/Limits</span>
</pre></div>
</div>
<p>A short interface file, but lots to learn here:</p>
<p>You can see one CMD defined, which has the name <em>get_id</em>. If you want to
implement this interface (and <em>provide</em> the functionality of the interface
to other modules), this is the method you will have to fill with code in your
implementation later.</p>
<p>There is one argument defined for the method called <em>verbose</em>. A return value
of type <em>integer</em> rounds things up for the one CMD of this interface.</p>
<p>VARs are pieces of information which get published for the network of
listening modules regularly. We have two VARs in this example. The first one
is of type <em>integer</em>, the second one is a reference to a type definition.</p>
<p>This way, you can create structs or classes (however you would call a bunch
of simple data-types grouped inside of one logical unit) for publishing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In some yaml interface files in the EVerest GitHub project, you will still
find an additional type attribute besides a <cite>$ref</cite> attribute. In most cases,
the type will be of value <cite>object</cite>. This is considered bad practice and will
be deprecated in future versions.</p>
</div>
<p>Let’s have a look at a type definition in the next section.</p>
</section>
<section id="types">
<h4><span class="section-number">3.4.1.3. </span>Types<a class="headerlink" href="#types" title="Permalink to this heading">¶</a></h4>
<p>As you have seen in the example interface yaml, you can use <em>types</em> instead
of simple data entities (like boolean, string, integer and so on).</p>
<p>In the interface, you saw a reference to an EVerest type definition.</p>
<p>You can find the type definitions as yaml files in the following directory:</p>
<p><em>{EVerest Workspace Directory}/everest-core/types</em></p>
<p>An easy definition of a type could look like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Describe which group of types will follow.</span>
<span class="linenos"> 2</span><span class="nt">types</span><span class="p">:</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">SomeType</span><span class="p">:</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Describe this type.</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="nt">additionalProperties</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="nt">properties</span><span class="p">:</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="nt">property_1</span><span class="p">:</span>
<span class="linenos"> 9</span><span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Describe the first property.</span>
<span class="linenos">10</span><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span>
<span class="linenos">11</span><span class="w">      </span><span class="nt">property_2</span><span class="p">:</span>
<span class="linenos">12</span><span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Describe the second property.</span>
<span class="linenos">13</span><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span>
</pre></div>
</div>
<p>You can see one defined type here. It has two properties. A property could
again be another type reference.</p>
<p>Now, as we have defined everything, it is time to let the EVerest command line
interface - the ev-cli tool - generate the implementation stubs.</p>
</section>
</section>
<section id="generate-the-stub-files">
<h3><span class="section-number">3.4.2. </span>Generate the stub files<a class="headerlink" href="#generate-the-stub-files" title="Permalink to this heading">¶</a></h3>
<p>Your main cpp file will have two special functions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">MyModuleName::init</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">MyModuleName::ready</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
<p>When initialising, the EVerest framework will call all init() functions of all
modules one after the other. After having initialised all modules in that way,
the framework calls the ready() functions.</p>
<p>This allows you to do setup things that relate only to your current module in
the init() function and all stuff requiring other modules being initialised in
your ready() function.</p>
<p>Furthermore, you will get generated files for all interfaces that you
declared to be implemented in your module. Those interface files will contain
handler methods for the CMDs you have declared in the interface files.</p>
<p>You can walk through the generated files in your new module directory and
have a look at the prepared classes.</p>
</section>
</section>
<section id="one-deep-breath-and-next-steps">
<h2><span class="section-number">3.5. </span>One Deep Breath And Next Steps<a class="headerlink" href="#one-deep-breath-and-next-steps" title="Permalink to this heading">¶</a></h2>
<p>You made it. Great!</p>
<p>Probably, now is a good time to take a deep breath and review what you have
learnt about EVerest.</p>
<p>You might have generated stub files now but still are not sure how to procede
with implementing your specific scenarios?</p>
<p>Good news: A tutorial about developing EVerest modules is waiting for you.</p>
<p><a class="reference internal" href="../tutorials/new_modules/index.html#tutorial-create-modules-main"><span class="std std-ref">Continue with the tutorial here!</span></a></p>
<p>Or - if you rather would like to have more theoretical input about EVerest
modules - continue
<a class="reference internal" href="04_detail_module_concept.html#moduleconcept-main"><span class="std std-ref">with the EVerest Module Concept page</span></a>.</p>
<p>See you in our <a class="reference internal" href="../index.html#index-contact"><span class="std std-ref">weekly tech meetings</span></a> and thanks for
being a part of the EVerest community!</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01_framework/index.html">1. EVerest Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_detail_pre_setup.html">2. Prepare Your Development Environment</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. A Kind Of Quick Guide To EVerest</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prepare-your-development-environment">3.1. Prepare Your Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#download-and-install">3.2. Download And Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simulating-everest">3.3. Simulating EVerest</a></li>
<li class="toctree-l2"><a class="reference internal" href="#understanding-everest-modules">3.4. Understanding EVerest Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#one-deep-breath-and-next-steps">3.5. One Deep Breath And Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="04_detail_module_concept.html">4. EVerest Modules in Detail</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_existing_modules.html">5. EVerest Module Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_handling_bank_cards.html">6. Bank Card Payment</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_configure_plug_and_charge.html">7. Configure Plug&amp;Charge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_tools/index.html">8. EVerest development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">9. Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">10. Frequently Asked Questions And Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/pionix_belay_box.html">11. Pionix BelayBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/02_snapshot.html">12. Snapshot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/01_everest_reference/index.html">13. EVerest Reference</a></li>
</ul>

  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="02_detail_pre_setup.html"
                          title="previous chapter"><span class="section-number">2. </span>Prepare Your Development Environment</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="04_detail_module_concept.html"
                          title="next chapter"><span class="section-number">4. </span>EVerest Modules in Detail</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/general/03_quick_start_guide.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div><h3>Community</h3>
<ul class="nav nav-sidebar">
<li><a href="https://lists.lfenergy.org/g/everest" target="_blank"><img src="../_static/icons/mail.svg" style="height: 0.8em" /> Get Support</a></li>
<li><a href="https://www.youtube.com/@lfe_everest" target="_blank"><img src="../_static/icons/youtube.svg" style="height: 0.8em" /> YouTube Channel</a></li>
<li><a href="https://twitter.com/everestincharge" target="_blank"><img src="../_static/icons/twitter.svg" style="height: 0.8em" /> Twitter</a></li>
<li><a href="https://fosstodon.org/@EVerest" target="_blank">Mastodon</a></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="04_detail_module_concept.html" title="4. EVerest Modules in Detail"
             >next</a> |</li>
        <li class="right" >
          <a href="02_detail_pre_setup.html" title="2. Prepare Your Development Environment"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">EVerest  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3. </span>A Kind Of Quick Guide To EVerest</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Pionix GmbH.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>