<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>7.1. How To: Act &#8212; EVerest  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxdoc.css?v=0a676766" />
    <link rel="stylesheet" type="text/css" href="../../_static/contentui.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/contentui.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="7.2. How To: Git" href="../how_to_git/index.html" />
    <link rel="prev" title="7. Tutorials" href="../index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../how_to_git/index.html" title="7.2. How To: Git"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="7. Tutorials"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">EVerest  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U"><span class="section-number">7. </span>Tutorials</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">7.1. </span>How To: Act</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="how-to-act">
<span id="tutorial-act"></span><h1><span class="section-number">7.1. </span>How To: Act<a class="headerlink" href="#how-to-act" title="Permalink to this heading">¶</a></h1>
<p>This is a tutorial about how to setup and use
the local github actions runner <code class="docutils literal notranslate"><span class="pre">act</span></code>.</p>
<section id="setup">
<h2><span class="section-number">7.1.1. </span>Setup<a class="headerlink" href="#setup" title="Permalink to this heading">¶</a></h2>
<ol class="arabic">
<li><p>Install act</p>
<blockquote>
<div><p>Follow the instructions on the
<a class="reference external" href="https://github.com/nektos/act#installation">original act repository</a>.</p>
</div></blockquote>
</li>
<li><p>Configure <code class="docutils literal notranslate"><span class="pre">~/.actrc</span></code></p>
<blockquote>
<div><p>Add the following lines to the file <code class="docutils literal notranslate"><span class="pre">~/.actrc</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="o">-</span><span class="n">P</span> <span class="n">ubuntu</span><span class="o">-</span><span class="n">latest</span><span class="o">=</span><span class="n">ghcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">catthehacker</span><span class="o">/</span><span class="n">ubuntu</span><span class="p">:</span><span class="n">act</span><span class="o">-</span><span class="n">latest</span>
<span class="linenos">2</span><span class="o">-</span><span class="n">P</span> <span class="n">ubuntu</span><span class="o">-</span><span class="mf">20.04</span><span class="o">=</span><span class="n">ghcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">catthehacker</span><span class="o">/</span><span class="n">ubuntu</span><span class="p">:</span><span class="n">act</span><span class="o">-</span><span class="mf">20.04</span>
<span class="linenos">3</span><span class="o">-</span><span class="n">P</span> <span class="n">ubuntu</span><span class="o">-</span><span class="mf">18.04</span><span class="o">=</span><span class="n">ghcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">catthehacker</span><span class="o">/</span><span class="n">ubuntu</span><span class="p">:</span><span class="n">act</span><span class="o">-</span><span class="mf">18.04</span>
<span class="linenos">4</span><span class="o">-</span><span class="n">P</span> <span class="bp">self</span><span class="o">-</span><span class="n">hosted</span><span class="o">=</span><span class="n">ghcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">catthehacker</span><span class="o">/</span><span class="n">ubuntu</span><span class="p">:</span><span class="n">act</span><span class="o">-</span><span class="mf">20.04</span>
<span class="linenos">5</span><span class="o">--</span><span class="n">actor</span> <span class="n">github</span><span class="o">-</span><span class="n">username</span>
<span class="linenos">6</span><span class="o">--</span><span class="n">secret</span><span class="o">-</span><span class="n">file</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">github</span><span class="o">.</span><span class="n">secrets</span>
<span class="linenos">7</span><span class="o">--</span><span class="n">artifact</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">your</span><span class="o">/.</span><span class="n">artifact</span><span class="o">-</span><span class="n">server</span>
<span class="linenos">8</span><span class="o">-</span><span class="n">W</span> <span class="o">../.</span><span class="n">github</span><span class="o">/</span><span class="n">workflows</span><span class="o">/</span>
</pre></div>
</div>
<p>Each line presents an argument passed when calling <code class="docutils literal notranslate"><span class="pre">act</span></code>.
The first four lines are needed to use the correct docker images.
The <code class="docutils literal notranslate"><span class="pre">--actor</span></code> argument specifies <code class="docutils literal notranslate"><span class="pre">github.actor</span></code> in the workflow.
The <code class="docutils literal notranslate"><span class="pre">--secret-file</span></code> argument specifies the path to the file containing the secrets.
The <code class="docutils literal notranslate"><span class="pre">--artifact-server-path</span></code> argument specifies the path to the directory where the artifacts are stored.
The <code class="docutils literal notranslate"><span class="pre">-W</span></code> argument specifies the path to the
directory where the workflows are stored.
It’s default value is <code class="docutils literal notranslate"><span class="pre">.github/workflows/</span></code>.</p>
</div></blockquote>
</li>
<li><p>Set up the secrets</p>
<blockquote>
<div><p>Create a file <code class="docutils literal notranslate"><span class="pre">github.secrets</span></code> in the directory you specified
in your <code class="docutils literal notranslate"><span class="pre">~/.actrc</span></code> file.
The file should contain the secrets in the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SECRET_NAME_1</span><span class="o">=</span><span class="s2">&quot;secret_value_1&quot;</span>
<span class="n">SECRET_NAME_2</span><span class="o">=</span><span class="s2">&quot;secret_value_2&quot;</span>
<span class="n">MULTILINE_SECRET</span><span class="o">=</span><span class="s2">&quot;line_1</span><span class="se">\n</span><span class="s2">line2</span><span class="se">\n</span><span class="s2">line3&quot;</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Probably you want to configure the following secrets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GITHUB_TOKEN</span><span class="o">=</span><span class="s2">&quot;your_github_token&quot;</span>
<span class="n">SA_GITHUB_TOKEN</span><span class="o">=</span><span class="s2">&quot;github_token_of_the_service_account&quot;</span>
<span class="n">SA_GITHUB_SSH_KEY</span><span class="o">=</span><span class="s2">&quot;ssh_key_of_the_service_account&quot;</span>
<span class="n">GITHUB_ACTOR</span><span class="o">=</span><span class="s2">&quot;username_of_the_service_account&quot;</span>
</pre></div>
</div>
<p>If you don’t have access to the service account, don’t
want to use it or just testing something out locally,
you can use your own github token and
your own ssh key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GITHUB_TOKEN</span><span class="o">=</span><span class="s2">&quot;your_github_token&quot;</span>
<span class="n">SA_GITHUB_TOKEN</span><span class="o">=</span><span class="s2">&quot;your_github_token&quot;</span>
<span class="n">SA_GITHUB_SSH_KEY</span><span class="o">=</span><span class="s2">&quot;your_ssh_key&quot;</span>
<span class="n">GITHUB_ACTOR</span><span class="o">=</span><span class="s2">&quot;your_username&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
<section id="usage">
<h2><span class="section-number">7.1.2. </span>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<section id="list-available-jobs">
<h3><span class="section-number">7.1.2.1. </span>List available jobs:<a class="headerlink" href="#list-available-jobs" title="Permalink to this heading">¶</a></h3>
<p>To see all jobs in your workflows for an specific event use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">act</span> <span class="o">&lt;</span><span class="n">event</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">W</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">workflows</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">l</span>
</pre></div>
</div>
<p>When the <code class="docutils literal notranslate"><span class="pre">&lt;event&gt;</span></code> argument is omitted the default event is <code class="docutils literal notranslate"><span class="pre">push</span></code>.
It is not possible to list all jobs for all events at the same time.</p>
</section>
<section id="run-jobs-trigger-events">
<h3><span class="section-number">7.1.2.2. </span>Run Jobs / Trigger events:<a class="headerlink" href="#run-jobs-trigger-events" title="Permalink to this heading">¶</a></h3>
<p>To trigger an event use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">act</span> <span class="o">&lt;</span><span class="n">event</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">W</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">workflows</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>When the <code class="docutils literal notranslate"><span class="pre">&lt;event&gt;</span></code> argument is omitted the default event is <code class="docutils literal notranslate"><span class="pre">push</span></code>.
The event is triggered for all your workflows in the directory specified
by the <code class="docutils literal notranslate"><span class="pre">-W</span></code> argument.</p>
<p>If you want to trigger an event for a specific workflow use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">act</span> <span class="o">&lt;</span><span class="n">event</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">W</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">specific</span><span class="o">/</span><span class="n">workflow</span><span class="o">-</span><span class="n">file</span><span class="o">.</span><span class="n">yml</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If you want to trigger an event for a specific job use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">act</span> <span class="o">&lt;</span><span class="n">event</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">W</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">workflows</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">j</span> <span class="o">&lt;</span><span class="n">job</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="bind-working-directory">
<h3><span class="section-number">7.1.2.3. </span>Bind working directory:<a class="headerlink" href="#bind-working-directory" title="Permalink to this heading">¶</a></h3>
<p>Since the actions are executed in a docker container,
the working directory isn’t direct accessible by default.</p>
<p>If you want to bind the working directory use the <code class="docutils literal notranslate"><span class="pre">-b</span></code> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">act</span> <span class="o">&lt;</span><span class="n">event</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">W</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">workflows</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">j</span> <span class="o">&lt;</span><span class="n">job</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">b</span>
</pre></div>
</div>
<p>With this you bind the working directory to the current directory.
If you want to use a clean directory try:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">work0</span><span class="o">/</span>
<span class="n">cd</span> <span class="n">work0</span><span class="o">/</span>
<span class="n">act</span> <span class="o">&lt;</span><span class="n">event</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">W</span> <span class="o">&lt;../.</span><span class="n">github</span><span class="o">/</span><span class="n">workflows</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">j</span> <span class="o">&lt;</span><span class="n">job</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">b</span>
</pre></div>
</div>
<p>This is why adding the line <code class="docutils literal notranslate"><span class="pre">-W</span> <span class="pre">../.github/workflows/</span></code>
to your <code class="docutils literal notranslate"><span class="pre">~/.actrc</span></code> file is a good idea.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../general/01_framework.html">1. EVerest framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/02_detail_pre_setup.html">2. Prepare Your Development Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/03_quick_start_guide.html">3. A Kind Of Quick Guide To EVerest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/04_detail_module_concept.html">4. EVerest Modules in Detail</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/05_existing_modules.html">5. EVerest Module Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_tools/index.html">6. EVerest development tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">7. Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">7.1. How To: Act</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to_git/index.html">7.2. How To: Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to_ocpp/index.html">7.3. How To: OCPP1.6 in EVerest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to_plug_and_charge/index.html">7.4. How To: Plug&amp;Charge with EVerest Software in the loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../new_modules/index.html">7.5. How To: Develop New Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../run_sil/index.html">7.6. Tutorial: Simulate EVerest in Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker_setup.html">7.7. Docker setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx_general.html">7.8. General Sphinx Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx_style_guide.html">7.9. Sphinx style guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../general/faq.html">8. Frequently Asked Questions And Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/pionix_belay_box.html">9. Pionix BelayBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/02_snapshot.html">10. Snapshot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/01_everest_reference/index.html">11. EVerest Reference</a></li>
</ul>

  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../index.html"
                          title="previous chapter"><span class="section-number">7. </span>Tutorials</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="../how_to_git/index.html"
                          title="next chapter"><span class="section-number">7.2. </span>How To: Git</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/tutorials/how_to_act/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div><h3>Community</h3>
<ul class="nav nav-sidebar">
<li><a href="https://lists.lfenergy.org/g/everest" target="_blank"><img src="../../_static/icons/mail.svg" style="height: 0.8em" /> Get Support</a></li>
<li><a href="https://www.youtube.com/@lfe_everest" target="_blank"><img src="../../_static/icons/youtube.svg" style="height: 0.8em" /> YouTube Channel</a></li>
<li><a href="https://twitter.com/everestincharge" target="_blank"><img src="../../_static/icons/twitter.svg" style="height: 0.8em" /> Twitter</a></li>
<li><a href="https://fosstodon.org/@EVerest" target="_blank">Mastodon</a></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../how_to_git/index.html" title="7.2. How To: Git"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="7. Tutorials"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">EVerest  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">7. </span>Tutorials</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">7.1. </span>How To: Act</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2021, Pionix GmbH.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    </div>
  </body>
</html>