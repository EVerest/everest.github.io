<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ocpp: include/ocpp/v201/init_device_model_db.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ocpp<span id="projectnumber">&#160;0.21.0</span>
   </div>
   <div id="projectbrief">A C++ implementation of the Open Charge Point Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_c2f45d518c3a137bc4ceafe28ab0c129.html">ocpp</a></li><li class="navelem"><a class="el" href="dir_57783a206765cc9a1aba2eeec316fffa.html">v201</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">init_device_model_db.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;filesystem&gt;</code><br />
<code>#include &lt;ocpp/common/database/database_handler_common.hpp&gt;</code><br />
<code>#include &lt;ocpp/v201/device_model_storage_interface.hpp&gt;</code><br />
</div>
<p><a href="init__device__model__db_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structocpp_1_1v201_1_1ComponentKey.html">ocpp::v201::ComponentKey</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class that holds a component.  <a href="structocpp_1_1v201_1_1ComponentKey.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structocpp_1_1v201_1_1DbVariableAttribute.html">ocpp::v201::DbVariableAttribute</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct that holds a <a class="el" href="structocpp_1_1v201_1_1VariableAttribute.html">VariableAttribute</a> struct and an database id.  <a href="structocpp_1_1v201_1_1DbVariableAttribute.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structocpp_1_1v201_1_1DeviceModelVariable.html">ocpp::v201::DeviceModelVariable</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct holding the <a class="el" href="structocpp_1_1v201_1_1Variable.html">Variable</a> of a device model.  <a href="structocpp_1_1v201_1_1DeviceModelVariable.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classocpp_1_1v201_1_1InitDeviceModelDbError.html">ocpp::v201::InitDeviceModelDbError</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error class to be able to throw a custom error within the class.  <a href="classocpp_1_1v201_1_1InitDeviceModelDbError.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classocpp_1_1v201_1_1InitDeviceModelDb.html">ocpp::v201::InitDeviceModelDb</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class to initialize the device model db using the component config files.  <a href="classocpp_1_1v201_1_1InitDeviceModelDb.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab28a2a5ff203baaf2cf8158801468759"><td class="memItemLeft" align="right" valign="top"><a id="ab28a2a5ff203baaf2cf8158801468759" name="ab28a2a5ff203baaf2cf8158801468759"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ocpp::v201::from_json</b> (const json &amp;j, ComponentKey &amp;c)</td></tr>
<tr class="memdesc:ab28a2a5ff203baaf2cf8158801468759"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert from json to a <a class="el" href="structocpp_1_1v201_1_1ComponentKey.html" title="Class that holds a component.">ComponentKey</a> struct. The to_json is not implemented as we don't need to write the component config to a json file. <br /></td></tr>
<tr class="separator:ab28a2a5ff203baaf2cf8158801468759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24497771863bea5684a1b2b4c62ebbaf"><td class="memItemLeft" align="right" valign="top"><a id="a24497771863bea5684a1b2b4c62ebbaf" name="a24497771863bea5684a1b2b4c62ebbaf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ocpp::v201::from_json</b> (const json &amp;j, DeviceModelVariable &amp;c)</td></tr>
<tr class="memdesc:a24497771863bea5684a1b2b4c62ebbaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert from json to a <a class="el" href="structocpp_1_1v201_1_1DeviceModelVariable.html" title="Struct holding the Variable of a device model.">DeviceModelVariable</a> struct. The to_json is not implemented for this struct as we don't need to write the component config to a json file. <br /></td></tr>
<tr class="separator:a24497771863bea5684a1b2b4c62ebbaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a206823ee925611347a3fd1817ea3a16f"><td class="memItemLeft" align="right" valign="top"><a id="a206823ee925611347a3fd1817ea3a16f" name="a206823ee925611347a3fd1817ea3a16f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ocpp::v201::from_json</b> (const json &amp;j, VariableMonitoringMeta &amp;c)</td></tr>
<tr class="memdesc:a206823ee925611347a3fd1817ea3a16f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert from json to a <a class="el" href="structocpp_1_1v201_1_1VariableMonitoringMeta.html" title="Helper struct that holds database only values that don&#39;t have spec coverage.">VariableMonitoringMeta</a> struct. The to_json is not implemented for this struct as we don't need to write the component config to a json file. <br /></td></tr>
<tr class="separator:a206823ee925611347a3fd1817ea3a16f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This class will read the device model config files and put them in the device model database.</p>
<p >If the database already exists and there are some changes on components, this class will make the changes in the database accordingly.</p>
<p >It will also re-apply the component config. Config items will only be replaced if they are changed and the value in the database is not set by an external source, like the CSMS.</p>
<p >The data from the component config json files or database are read into some structs. Some structs could be reused from the DeviceModelStorage class, but some members are missing there and and to prevent too many database reads, some structs are 'redefined' in this class with the proper members.</p>
<p >Since the DeviceModel class creates a map based on the device model database in the constructor, this class should first be finished with the initialization before creating the DeviceModel class.</p>
<p >The config values are updated every startup as well, as long as the initial / default values are set in the database. If the value is set by the user or csms or some other process, the value will not be overwritten.</p>
<p >Almost every function throws exceptions, because this class should be used only when initializing the chargepoint and the database must be correct before starting the application. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
