<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ocpp: ocpp::v2::InitDeviceModelDb Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ocpp<span id="projectnumber">&#160;0.24.1</span>
   </div>
   <div id="projectbrief">A C++ implementation of the Open Charge Point Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ocpp</b></li><li class="navelem"><b>v2</b></li><li class="navelem"><a class="el" href="classocpp_1_1v2_1_1InitDeviceModelDb.html">InitDeviceModelDb</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classocpp_1_1v2_1_1InitDeviceModelDb-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ocpp::v2::InitDeviceModelDb Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class to initialize the device model db using the component config files.  
 <a href="classocpp_1_1v2_1_1InitDeviceModelDb.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="init__device__model__db_8hpp_source.html">init_device_model_db.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ocpp::v2::InitDeviceModelDb:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classocpp_1_1v2_1_1InitDeviceModelDb.png" usemap="#ocpp::v2::InitDeviceModelDb_map" alt=""/>
  <map id="ocpp::v2::InitDeviceModelDb_map" name="ocpp::v2::InitDeviceModelDb_map">
<area href="classocpp_1_1common_1_1DatabaseHandlerCommon.html" alt="ocpp::common::DatabaseHandlerCommon" shape="rect" coords="0,0,244,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a04a5e4dd1b417866c37e202347912bc1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classocpp_1_1v2_1_1InitDeviceModelDb.html#a04a5e4dd1b417866c37e202347912bc1">InitDeviceModelDb</a> (const std::filesystem::path &amp;database_path, const std::filesystem::path &amp;migration_files_path)</td></tr>
<tr class="memdesc:a04a5e4dd1b417866c37e202347912bc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classocpp_1_1v2_1_1InitDeviceModelDb.html#a04a5e4dd1b417866c37e202347912bc1">More...</a><br /></td></tr>
<tr class="separator:a04a5e4dd1b417866c37e202347912bc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4de1270bab83d5b71525723ef19c210e"><td class="memItemLeft" align="right" valign="top"><a id="a4de1270bab83d5b71525723ef19c210e" name="a4de1270bab83d5b71525723ef19c210e"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><b>~InitDeviceModelDb</b> ()</td></tr>
<tr class="memdesc:a4de1270bab83d5b71525723ef19c210e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a4de1270bab83d5b71525723ef19c210e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9e87c00a521ece02852b56029823baf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classocpp_1_1v2_1_1InitDeviceModelDb.html#ae9e87c00a521ece02852b56029823baf">initialize_database</a> (const std::filesystem::path &amp;config_path, const bool delete_db_if_exists)</td></tr>
<tr class="memdesc:ae9e87c00a521ece02852b56029823baf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the database schema and component config.  <a href="classocpp_1_1v2_1_1InitDeviceModelDb.html#ae9e87c00a521ece02852b56029823baf">More...</a><br /></td></tr>
<tr class="separator:ae9e87c00a521ece02852b56029823baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classocpp_1_1common_1_1DatabaseHandlerCommon.html">ocpp::common::DatabaseHandlerCommon</a></td></tr>
<tr class="memitem:a8e1e9318113ff8f18e734d57661afe87 inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a8e1e9318113ff8f18e734d57661afe87">DatabaseHandlerCommon</a> (std::unique_ptr&lt; <a class="el" href="classocpp_1_1common_1_1DatabaseConnectionInterface.html">DatabaseConnectionInterface</a> &gt; database, const fs::path &amp;sql_migration_files_path, uint32_t target_schema_version) noexcept</td></tr>
<tr class="memdesc:a8e1e9318113ff8f18e734d57661afe87 inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common database handler class Class handles some common database functionality like inserting and removing transaction messages.  <a href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a8e1e9318113ff8f18e734d57661afe87">More...</a><br /></td></tr>
<tr class="separator:a8e1e9318113ff8f18e734d57661afe87 inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea03cf915701005605b74231690f15e4 inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memItemLeft" align="right" valign="top"><a id="aea03cf915701005605b74231690f15e4" name="aea03cf915701005605b74231690f15e4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>open_connection</b> ()</td></tr>
<tr class="memdesc:aea03cf915701005605b74231690f15e4 inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens connection to database file and performs the initialization by calling <a class="el" href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a68b8eedaa5439fe92ae272c7ae2f4f34" title="Perform the initialization needed to use the database. Will be called by open_connection()">init_sql()</a> <br /></td></tr>
<tr class="separator:aea03cf915701005605b74231690f15e4 inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad415785c396716ea004faf74b60b656b inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memItemLeft" align="right" valign="top"><a id="ad415785c396716ea004faf74b60b656b" name="ad415785c396716ea004faf74b60b656b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>close_connection</b> ()</td></tr>
<tr class="memdesc:ad415785c396716ea004faf74b60b656b inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the database connection. <br /></td></tr>
<tr class="separator:ad415785c396716ea004faf74b60b656b inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed9d8eb3e072cb6d5e70d7a603ffb42 inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; <a class="el" href="structocpp_1_1common_1_1DBTransactionMessage.html">DBTransactionMessage</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a6ed9d8eb3e072cb6d5e70d7a603ffb42">get_message_queue_messages</a> (const QueueType queue_type=QueueType::Transaction)</td></tr>
<tr class="memdesc:a6ed9d8eb3e072cb6d5e70d7a603ffb42 inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get messages from messages queue table specified by <code>queue_type</code>.  <a href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a6ed9d8eb3e072cb6d5e70d7a603ffb42">More...</a><br /></td></tr>
<tr class="separator:a6ed9d8eb3e072cb6d5e70d7a603ffb42 inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b12b3e1587615c56c801cdefa72e24b inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a6b12b3e1587615c56c801cdefa72e24b">insert_message_queue_message</a> (const <a class="el" href="structocpp_1_1common_1_1DBTransactionMessage.html">DBTransactionMessage</a> &amp;message, const QueueType queue_type=QueueType::Transaction)</td></tr>
<tr class="memdesc:a6b12b3e1587615c56c801cdefa72e24b inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert a new message into messages queue table specified by <code>queue_type</code>.  <a href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a6b12b3e1587615c56c801cdefa72e24b">More...</a><br /></td></tr>
<tr class="separator:a6b12b3e1587615c56c801cdefa72e24b inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a304e698416e5a0ae729906ecd922923e inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a304e698416e5a0ae729906ecd922923e">remove_message_queue_message</a> (const std::string &amp;unique_id, const QueueType queue_type=QueueType::Transaction)</td></tr>
<tr class="memdesc:a304e698416e5a0ae729906ecd922923e inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a message from the messages queue table specified by <code>queue_type</code>.  <a href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a304e698416e5a0ae729906ecd922923e">More...</a><br /></td></tr>
<tr class="separator:a304e698416e5a0ae729906ecd922923e inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bd569a8c9d220659b160742ab18f8da inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a7bd569a8c9d220659b160742ab18f8da">clear_message_queue</a> (const QueueType queue_type=QueueType::Transaction)</td></tr>
<tr class="memdesc:a7bd569a8c9d220659b160742ab18f8da inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes all entries from message queue table specified by <code>queue_type</code>.  <a href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a7bd569a8c9d220659b160742ab18f8da">More...</a><br /></td></tr>
<tr class="separator:a7bd569a8c9d220659b160742ab18f8da inherit pub_methods_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:abf84ac16e85a5e995a3a3d8043e33f75"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classocpp_1_1v2_1_1InitDeviceModelDb.html#abf84ac16e85a5e995a3a3d8043e33f75">init_sql</a> () override</td></tr>
<tr class="memdesc:abf84ac16e85a5e995a3a3d8043e33f75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init database: set foreign keys on (so when a component is removed or updated, all variables, characteristics and attributes belonging to that component are also removed or updated, for example).  <a href="classocpp_1_1v2_1_1InitDeviceModelDb.html#abf84ac16e85a5e995a3a3d8043e33f75">More...</a><br /></td></tr>
<tr class="separator:abf84ac16e85a5e995a3a3d8043e33f75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68b8eedaa5439fe92ae272c7ae2f4f34"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a68b8eedaa5439fe92ae272c7ae2f4f34">init_sql</a> ()=0</td></tr>
<tr class="memdesc:a68b8eedaa5439fe92ae272c7ae2f4f34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform the initialization needed to use the database. Will be called by <a class="el" href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#aea03cf915701005605b74231690f15e4" title="Opens connection to database file and performs the initialization by calling init_sql()">open_connection()</a>  <a href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a68b8eedaa5439fe92ae272c7ae2f4f34">More...</a><br /></td></tr>
<tr class="separator:a68b8eedaa5439fe92ae272c7ae2f4f34"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classocpp_1_1common_1_1DatabaseHandlerCommon"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classocpp_1_1common_1_1DatabaseHandlerCommon')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classocpp_1_1common_1_1DatabaseHandlerCommon.html">ocpp::common::DatabaseHandlerCommon</a></td></tr>
<tr class="memitem:ae8fd7a0f891862e3ac2463cb8ea0ce52 inherit pro_attribs_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memItemLeft" align="right" valign="top"><a id="ae8fd7a0f891862e3ac2463cb8ea0ce52" name="ae8fd7a0f891862e3ac2463cb8ea0ce52"></a>
std::unique_ptr&lt; <a class="el" href="classocpp_1_1common_1_1DatabaseConnectionInterface.html">DatabaseConnectionInterface</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>database</b></td></tr>
<tr class="separator:ae8fd7a0f891862e3ac2463cb8ea0ce52 inherit pro_attribs_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07799f360006a9d38a2891c57c308d5d inherit pro_attribs_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memItemLeft" align="right" valign="top"><a id="a07799f360006a9d38a2891c57c308d5d" name="a07799f360006a9d38a2891c57c308d5d"></a>
const fs::path&#160;</td><td class="memItemRight" valign="bottom"><b>sql_migration_files_path</b></td></tr>
<tr class="separator:a07799f360006a9d38a2891c57c308d5d inherit pro_attribs_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37401a4451c3ead615cb6e42c4064c7c inherit pro_attribs_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memItemLeft" align="right" valign="top"><a id="a37401a4451c3ead615cb6e42c4064c7c" name="a37401a4451c3ead615cb6e42c4064c7c"></a>
const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>target_schema_version</b></td></tr>
<tr class="separator:a37401a4451c3ead615cb6e42c4064c7c inherit pro_attribs_classocpp_1_1common_1_1DatabaseHandlerCommon"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Class to initialize the device model db using the component config files. </p>
<p >This class will read the device model config files and put them in the device model database.</p>
<p >If the database already exists and there are some changes on components, this class will make the changes in the database accordingly.</p>
<p >It will also re-apply the component config. Config items will only be replaced if they are changed and the value in the database is not set by an external source, like the CSMS.</p>
<p >The data from the component config json files or database are read into some structs. Some structs could be reused from the DeviceModelStorage class, but some members are missing there and and to prevent too many database reads, some structs are 'redefined' in this class with the proper members.</p>
<p >Since the <a class="el" href="classocpp_1_1v2_1_1DeviceModel.html" title="This class manages access to the device model representation and to the device model interface and pr...">DeviceModel</a> class creates a map based on the device model database in the constructor, this class should first be finished with the initialization before creating the <a class="el" href="classocpp_1_1v2_1_1DeviceModel.html" title="This class manages access to the device model representation and to the device model interface and pr...">DeviceModel</a> class.</p>
<p >The config values are updated every startup as well, as long as the initial / default values are set in the database. If the value is set by the user or csms or some other process, the value will not be overwritten.</p>
<p >Almost every function throws exceptions, because this class should be used only when initializing the chargepoint and the database must be correct before starting the application. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a04a5e4dd1b417866c37e202347912bc1" name="a04a5e4dd1b417866c37e202347912bc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04a5e4dd1b417866c37e202347912bc1">&#9670;&nbsp;</a></span>InitDeviceModelDb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ocpp::v2::InitDeviceModelDb::InitDeviceModelDb </td>
          <td>(</td>
          <td class="paramtype">const std::filesystem::path &amp;&#160;</td>
          <td class="paramname"><em>database_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::filesystem::path &amp;&#160;</td>
          <td class="paramname"><em>migration_files_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database_path</td><td>Path to the database. </td></tr>
    <tr><td class="paramname">migration_files_path</td><td>Path to the migration files. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abf84ac16e85a5e995a3a3d8043e33f75" name="abf84ac16e85a5e995a3a3d8043e33f75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf84ac16e85a5e995a3a3d8043e33f75">&#9670;&nbsp;</a></span>init_sql()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ocpp::v2::InitDeviceModelDb::init_sql </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Init database: set foreign keys on (so when a component is removed or updated, all variables, characteristics and attributes belonging to that component are also removed or updated, for example). </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classocpp_1_1v2_1_1InitDeviceModelDbError.html" title="Error class to be able to throw a custom error within the class.">InitDeviceModelDbError</a></td><td>When foreign key pragma could not be set to 'ON'. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classocpp_1_1common_1_1DatabaseHandlerCommon.html#a68b8eedaa5439fe92ae272c7ae2f4f34">ocpp::common::DatabaseHandlerCommon</a>.</p>

</div>
</div>
<a id="ae9e87c00a521ece02852b56029823baf" name="ae9e87c00a521ece02852b56029823baf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9e87c00a521ece02852b56029823baf">&#9670;&nbsp;</a></span>initialize_database()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ocpp::v2::InitDeviceModelDb::initialize_database </td>
          <td>(</td>
          <td class="paramtype">const std::filesystem::path &amp;&#160;</td>
          <td class="paramname"><em>config_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>delete_db_if_exists</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the database schema and component config. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config_path</td><td>Path to the component config. </td></tr>
    <tr><td class="paramname">delete_db_if_exists</td><td>Set to true to delete the database if it already exists.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classocpp_1_1v2_1_1InitDeviceModelDbError.html" title="Error class to be able to throw a custom error within the class.">InitDeviceModelDbError</a></td><td>- When database could not be initialized or<ul>
<li>Foreign keys could not be turned on or</li>
<li>Something could not be added to, retrieved or removed from the database </li>
</ul>
</td></tr>
    <tr><td class="paramname">std::runtime_error</td><td>If something went wrong during migration </td></tr>
    <tr><td class="paramname">DatabaseMigrationException</td><td>If something went wrong during migration </td></tr>
    <tr><td class="paramname">DatabaseConnectionException</td><td>If the database could not be opened </td></tr>
    <tr><td class="paramname">std::filesystem::filesystem_error</td><td>If the component config path does not exist </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/ocpp/v2/<a class="el" href="init__device__model__db_8hpp_source.html">init_device_model_db.hpp</a></li>
<li>lib/ocpp/v2/init_device_model_db.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
