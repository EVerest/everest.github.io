<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2. A Real Quick Guide To EVerest &#8212; EVerest  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxdoc.css" />
    <link rel="stylesheet" type="text/css" href="../_static/contentui.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/contentui.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Prepare Your Development Environment" href="03_detail_pre_setup.html" />
    <link rel="prev" title="1. EVerest framework" href="01_framework.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="03_detail_pre_setup.html" title="3. Prepare Your Development Environment"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="01_framework.html" title="1. EVerest framework"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">EVerest  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2. </span>A Real Quick Guide To EVerest</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="a-real-quick-guide-to-everest">
<span id="quickstartguide-main"></span><h1><span class="section-number">2. </span>A Real Quick Guide To EVerest<a class="headerlink" href="#a-real-quick-guide-to-everest" title="Permalink to this heading">¶</a></h1>
<section id="prepare-your-development-environment">
<h2><span class="section-number">2.1. </span>Prepare Your Development Environment<a class="headerlink" href="#prepare-your-development-environment" title="Permalink to this heading">¶</a></h2>
<section id="needed-packages">
<h3><span class="section-number">2.1.1. </span>Needed Packages<a class="headerlink" href="#needed-packages" title="Permalink to this heading">¶</a></h3>
<p>You will need Python, Jinja2, PyYAML, a compiler and some more system libraries
set up. See the detailed page for
<a class="reference internal" href="03_detail_pre_setup.html#preparedevenv-main"><span class="std std-ref">setting up your development environment</span></a> to see some
examples for operating systems.</p>
<p>After having created your environment, return back here, where we will go on
with downloading and installing EVerest.</p>
</section>
</section>
<section id="download-and-install">
<span id="quickstartguide-download-install"></span><h2><span class="section-number">2.2. </span>Download And Install<a class="headerlink" href="#download-and-install" title="Permalink to this heading">¶</a></h2>
<section id="get-the-needed-everest-repositories">
<h3><span class="section-number">2.2.1. </span>Get The Needed EVerest Repositories<a class="headerlink" href="#get-the-needed-everest-repositories" title="Permalink to this heading">¶</a></h3>
<section id="everest-dependency-manager-edm">
<h4><span class="section-number">2.2.1.1. </span>EVerest Dependency Manager - edm<a class="headerlink" href="#everest-dependency-manager-edm" title="Permalink to this heading">¶</a></h4>
<p>As EVerest is highly modular, you will need multiple repos, which can be found on GitHub.</p>
<p>To get the right repos as needed, the EVerest Dependency Manager - short edm - will help you.</p>
<p>To start with that, let’s get edm ready to work.</p>
<p>You will first of all need to pull <em>everest-dev-environment</em> to your development environment.</p>
<p>Python and its tools pip, setuptools and wheel have already been installed in the Prerequisites section above. So, you can pull the said repository and install the dependency manager, which will reside inside of .local/bin/ in your HOME directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:EVerest/everest-dev-environment.git
<span class="nb">cd</span><span class="w"> </span>everest-dev-environment/dependency_manager
python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.
</pre></div>
</div>
<p>To let edm prepare the most common repos for a simple start with EVerest,
let us use a default config file and set a workspace directory for the repos.
Set your preferred directory instead of <cite>{EVerest Workspace Directory}</cite>, e.g.
use <cite>~/checkout/everest-workspace</cite>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>edm<span class="w"> </span>--config<span class="w"> </span>../everest-complete.yaml<span class="w"> </span>--workspace<span class="w"> </span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>
</pre></div>
</div>
<p>(In future, as your system has edm properly setup, you can always initialise a
new workspace by calling <em>edm init</em>.)</p>
<p>edm will now prepare the most common repos to start with. It will also create a
YAML file which describes your newly created workspace. You can change that
YAML file later if you want to adopt the workspace to another scenario.</p>
<p>The YAML file can be found in the directory which you have chosen as workspace
directory. In the above example, it is located at</p>
<p><cite>{EVerest Workspace Directory}</cite>.</p>
</section>
<section id="everest-command-line-interface-ev-cli">
<h4><span class="section-number">2.2.1.2. </span>EVerest Command Line Interface: ev-cli<a class="headerlink" href="#everest-command-line-interface-ev-cli" title="Permalink to this heading">¶</a></h4>
<p>In its current version, ev-cli supports you by generating module templates. It
is also necessary to build EVerest.</p>
<p>To install ev-cli, change into the everest-utils/ev-dev-tools/ directory and
install ev-cli:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.
</pre></div>
</div>
<p>That is all to install ev-cli. You can find the binary file of ev-cli in your
HOME directory in .local/bin/</p>
<p>In a later step, we will use ev-cli to create module stubs.</p>
</section>
<section id="packages-for-iso-15118-communication">
<h4><span class="section-number">2.2.1.3. </span>Packages for ISO 15118 communication<a class="headerlink" href="#packages-for-iso-15118-communication" title="Permalink to this heading">¶</a></h4>
<p>To be able to build EVerest with ISO 15118 capability, you will have to
install the requirements for Josev:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>/Josev
python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
</section>
</section>
<section id="build-everest">
<h3><span class="section-number">2.2.2. </span>Build EVerest<a class="headerlink" href="#build-everest" title="Permalink to this heading">¶</a></h3>
<p>Now it is time to build EVerest:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>/everest-core
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>..
make<span class="w"> </span>install
</pre></div>
</div>
<p>edm helped you to keep it that simple. Let’s now dive into simulating our
current workspace.</p>
<p>If you get an error during the build process stating that ev-cli is installed
in an old version, go to your everest workspace directory and call <em>edm
–git-pull</em>. This will update the EVerest repositories. After that, repeat
building ev-cli and you should be good to go again.</p>
</section>
</section>
<section id="simulating-everest">
<h2><span class="section-number">2.3. </span>Simulating EVerest<a class="headerlink" href="#simulating-everest" title="Permalink to this heading">¶</a></h2>
<section id="prepare-the-helpers">
<span id="quickstartguide-helpers"></span><h3><span class="section-number">2.3.1. </span>Prepare The Helpers<a class="headerlink" href="#prepare-the-helpers" title="Permalink to this heading">¶</a></h3>
<p>EVerest comes with prepared Docker containers. The one that starts Mosquitto
(an MQTT broker) is required to run EVerest. This documentation section shows
the necessary steps to start the simulation and get the user interface running.</p>
<p>Further tools are not required to run EVerest (e.g. SteVe for OCPP). Further
information about EVerest Docker containers can be found on the
<a class="reference external" href="../tutorials/docker_setup.html">EVerest Docker Setup page</a>.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>To get all this working, make sure you have docker and docker-compose installed during the previous install phase. (If not, see install instructions for <a class="reference external" href="https://docs.docker.com/engine/install/#server">docker</a> and <a class="reference external" href="https://docs.docker.com/compose/install/#install-compose)">docker-compose</a>!)</p>
</div>
<p>In order for custom or local containers being able to talk to the services,
provided by the docker-compose containers, we need to create a common docker
network. It is called <cite>infranet_network</cite> and needs to be created by the
following command (IPv6 is enabled for containers which might need it):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>--driver<span class="w"> </span>bridge<span class="w"> </span>--ipv6<span class="w">  </span>--subnet<span class="w"> </span>fd00::/80<span class="w"> </span>infranet_network<span class="w"> </span>--attachable
</pre></div>
</div>
<p>Now, change into your workspace directory and enter the directory with the
prepared docker containers. Start the the mosquitto broker which will be
used by EVerest for the communication between the EVerest modules:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>/everest-utils/docker
sudo<span class="w"> </span>docker-compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>mqtt-server
</pre></div>
</div>
<p>That makes us ready for entering the simulation phase described in the next
chapter.</p>
</section>
<section id="software-in-a-loop">
<h3><span class="section-number">2.3.2. </span>Software in a loop<a class="headerlink" href="#software-in-a-loop" title="Permalink to this heading">¶</a></h3>
<p>In the following, we will start EVerest as a simple AC charging station with
software-in-the-loop configuration. This means that all hardware related
parts like Powermeter, RFID-Reader or even actual Electric Vehicles are
loaded as simulated modules.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Make sure you have prepared the helpers necessary for simulating EVerest as
shown in the <a class="reference internal" href="#quickstartguide-helpers"><span class="std std-ref">previous section</span></a>.</p>
</div>
<p>Change to the directory <cite>everest-core/build</cite>, which has been created during
EVerest install.</p>
<p>Start EVerest with a software-in-the-loop configuration via script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>/everest-core/build/run-scripts/run-sil.sh
</pre></div>
</div>
<p>In a new terminal window, run the Node-RED script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>EVerest<span class="w"> </span>Workspace<span class="w"> </span>Directory<span class="o">}</span>/everest-core/build/run-scripts/nodered-sil.sh
</pre></div>
</div>
<p>For a user interface, just direct your browser to <cite>http://localhost:1880/ui</cite> -
the required web-server has already been started via the shell scripts.</p>
<p>This will let us control the simulation in a very simple GUI.</p>
<p>You can analyse the output of the two shell scripts in the terminal windows to
get a little bit of insights about what is going on and which ports are used
etc.</p>
<p>In the GUI, you can simulate car charging sessions using the available buttons,
e.g. <cite>CAR PLUGIN</cite>, <cite>PAUSE</cite>, <cite>RESUME</cite> and so on:</p>
<a class="reference internal image-reference" href="../_images/quick-start-sil-gui.png"><img alt="../_images/quick-start-sil-gui.png" src="../_images/quick-start-sil-gui.png" style="width: 200px;" /></a>
</section>
<section id="your-own-simulations">
<h3><span class="section-number">2.3.3. </span>Your own simulations<a class="headerlink" href="#your-own-simulations" title="Permalink to this heading">¶</a></h3>
<p>To use simulation with your own custom flows, visit <a class="reference external" href="../tutorials/run_sil/index.html">Tuturial For Simulating EVerest</a>.</p>
</section>
<section id="admin-panel">
<h3><span class="section-number">2.3.4. </span>Admin Panel<a class="headerlink" href="#admin-panel" title="Permalink to this heading">¶</a></h3>
<p>The Admin Panel gives you a nice overview of the modules and the connections
between them.</p>
<p>As it resides in an own repository, which is not delivered automatically by edm in default, you will have to get the repo manually here: <a class="reference external" href="https://github.com/EVerest/everest-admin-panel">EVerest Admin Panel</a></p>
<p>You will have to install and run it via npm. After that, you can reach the
Admin Panel locally via your standard web port 80.</p>
<p>A detailed walk-through to assist you with that is in preparation.</p>
</section>
</section>
<section id="module-setup">
<span id="quickstartguide-modulesetup"></span><h2><span class="section-number">2.4. </span>Module Setup<a class="headerlink" href="#module-setup" title="Permalink to this heading">¶</a></h2>
<p>What parts does a module in EVerest consist of?</p>
<ul class="simple">
<li><p>Interface definition</p></li>
<li><p>Types definition</p></li>
<li><p>Module implementation</p></li>
</ul>
<p>Get a more detailed insight into the module config and implementation files on
the <a class="reference internal" href="04_detail_module_concept.html#moduleconcept-main"><span class="std std-ref">EVerest Module Concept page</span></a>.</p>
<p>Here, we want to go on with setting up a module template to use that as a base
for our own implementation.</p>
</section>
<section id="implementing-a-new-module">
<h2><span class="section-number">2.5. </span>Implementing a New Module<a class="headerlink" href="#implementing-a-new-module" title="Permalink to this heading">¶</a></h2>
<p>To create a new module in EVerest, we need to do some small steps shown in the
following. No worries: We will go through them in more detail afterwards.</p>
<ul class="simple">
<li><p>Create a new subdirectory in the modules directory.</p></li>
<li><p>Create a CMakeLists.txt (or borrow it from another module) with all
required libraries to build the module</p></li>
<li><p>Create a manifest with information about which interface implementations are
provided and which interfaces are required from connected modules.</p></li>
</ul>
<p>Now, let’s make ev-cli do its job of generating a module stub from a template:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ev-cli<span class="w"> </span>mod<span class="w"> </span>create<span class="w"> </span>MyModuleName
</pre></div>
</div>
<p>The name of the module is the one given as directory name.</p>
<p>You will see that you get cpp and hpp files for your main module class and also
for the interfaces to be implemented.</p>
<p>Your main cpp file will have two special functions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">MyModuleName::init</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">MyModuleName::ready</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
<p>When initialising, the EVerest framework will call all init() functions of all
modules one after the other. After having initialised all modules in that way,
the framework calls the ready() functions.</p>
<p>This allows you to do setup things that relate only to your current module in
the init() function and all stuff requiring other modules being initialised in
your ready() function.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>We will add additional documentation here soon to get you an idea about how vars can be published and how to interact with required modules from the outside. We will show callback functions and events and how all this works together in your module.</p>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01_framework.html">1. EVerest framework</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. A Real Quick Guide To EVerest</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prepare-your-development-environment">2.1. Prepare Your Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#download-and-install">2.2. Download And Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simulating-everest">2.3. Simulating EVerest</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-setup">2.4. Module Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implementing-a-new-module">2.5. Implementing a New Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="03_detail_pre_setup.html">3. Prepare Your Development Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_detail_module_concept.html">4. EVerest Module Concept</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_existing_modules.html">5. EVerest Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_tools/index.html">6. EVerest development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">7. Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/pionix_belay_box.html">8. Pionix BelayBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/02_snapshot.html">9. Snapshot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/01_everest_reference/index.html">10. EVerest Reference</a></li>
</ul>

  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="01_framework.html"
                          title="previous chapter"><span class="section-number">1. </span>EVerest framework</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="03_detail_pre_setup.html"
                          title="next chapter"><span class="section-number">3. </span>Prepare Your Development Environment</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/general/02_quick_start_guide.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div><h3>Community</h3>
<ul class="nav nav-sidebar">
<li><a href="https://lists.lfenergy.org/g/everest" target="_blank"><img src="../_static/icons/mail.svg" style="height: 0.8em" /> Get Support</a></li>
<li><a href="https://www.youtube.com/@lfe_everest" target="_blank"><img src="../_static/icons/youtube.svg" style="height: 0.8em" /> YouTube Channel</a></li>
<li><a href="https://twitter.com/everestincharge" target="_blank"><img src="../_static/icons/twitter.svg" style="height: 0.8em" /> Twitter</a></li>
<li><a href="https://fosstodon.org/@EVerest" target="_blank">Mastodon</a></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="03_detail_pre_setup.html" title="3. Prepare Your Development Environment"
             >next</a> |</li>
        <li class="right" >
          <a href="01_framework.html" title="1. EVerest framework"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">EVerest  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2. </span>A Real Quick Guide To EVerest</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Pionix GmbH.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.1.
    </div>
  </body>
</html>