<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ocpp: OCPP 2.0.1: Device model initialization and inserting of config values</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ocpp<span id="projectnumber">&#160;0.21.0</span>
   </div>
   <div id="projectbrief">A C++ implementation of the Open Charge Point Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">OCPP 2.0.1: Device model initialization and inserting of config values </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >If there is no custom database used for the device model, and 'initialize_device_model' is set to true in the constructor of ChargePoint, the device model will be created or updated when ChargePoint is created. This document will give more information about the files you need and what will be updated when the 'initialize_device_model' is set to true.</p>
<h1><a class="anchor" id="autotoc_md69"></a>
Database, component config and config file paths</h1>
<p >Along with the 'initialize_device_model' flag, a few paths must be given to the constructor:</p><ul>
<li>The path of the device model migration files (normally <code>resources/v201/device_model_migration_files</code>).</li>
<li>The path of the device model database.</li>
<li>The path of the directory with the device model config. There should be two directories in it: 'standardized' and 'custom', both containing device model config.</li>
</ul>
<h1><a class="anchor" id="autotoc_md70"></a>
Component config</h1>
<p >When the database is created for the first time, it will insert all components, variables, characteristics and attributes from the component config.</p>
<h1><a class="anchor" id="autotoc_md71"></a>
Update config values</h1>
<p >Each time the ChargePoint class is instantiated, the component config is read and the values will be set to the database accordingly. Only the initial values will be set to the values in the component config. So if for example the CSMS changed a value, it will not be updated to the value from the component config file.</p>
<h1><a class="anchor" id="autotoc_md72"></a>
Update component config</h1>
<p >To update a component, just place the correct json component config in the <code>component_config/custom</code> or <code>component_config/standardized</code> folder. When restarting the software, it will:</p><ul>
<li>Check if there are Components in the database that are not in the component config's. Those will be removed.</li>
<li>Check if there are Components in the component config's that are not in the database. Those will be added.</li>
<li>Check if anything has changed inside the Component (<code>Variable</code>, <code>Characteristics</code> or <code>Attributes</code>). Those will be removed, changed or added to the database as well.</li>
</ul>
<p >Note: When the <code>evse_id</code> or <code>connector_id</code> of a component is changed, this is seen as the removal of a Component and addition of a new one.</p>
<p >Note: OCPP requires EVSE and Connector numbering starting from 1 counting upwards.</p>
<p >Note: There should be no duplicate components or variables in the component config files. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
