<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ocpp: OCPP 2.0.1: Monitors</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ocpp<span id="projectnumber">&#160;0.24.1</span>
   </div>
   <div id="projectbrief">A C++ implementation of the Open Charge Point Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">OCPP 2.0.1: Monitors </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Monitors are a mechanism for reporting based on certain criteria the internal state of the variables present on the charger. The monitors can be configured in different ways, with custom monitors being sent from the CSMS and HardWired and Preconfigured monitors set up in the config of the database.</p>
<h1><a class="anchor" id="autotoc_md75"></a>
Basic Configuration</h1>
<p >The monitors are evaluated from time to time in the case of periodic monitors and after a variable has been modified in the case of monitors that are triggered. Periodic monitors will be handled from time to time, the default being 1 second.</p>
<h2><a class="anchor" id="autotoc_md76"></a>
Variables</h2>
<ul>
<li>Enabling monitors: set the <code>MonitoringCtrlrEnabled</code> variable to true</li>
<li>Periodic monitor process time: set the <code>MonitorsProcessingInterval</code> to the desired interval (default 1 second)</li>
<li>To activate monitor processing: set the <code>ActiveMonitoringBase</code> variable to <code>All</code></li>
<li>To filter the verbosity level: set the <code>ActiveMonitoringLevel</code> variable to a value of 0-9 with 9 being the most verbose</li>
<li>To filter the verbosity level when the charging station is offline: set the <code>OfflineQueuingSeverity</code> value to 0-9, with 9 keeping all monitor generated event while being offline</li>
</ul>
<p >Note: There is a small overhead for the monitoring process interval. The periodic monitors that are triggered will require a database value query. However, based on the count and config of monitors it is unlikely that many of them will trigger at the same time, therefore, the database queries will be limited.</p>
<h1><a class="anchor" id="autotoc_md77"></a>
Hardwired/Preconfigured Monitors</h1>
<p >In order to set up pre-existing monitors that are not set up by the CSMS, for the variables that allow monitoring the configuration json file can be extended in the following way:</p>
<div class="fragment"><div class="line">&quot;EVSEPower&quot;: {</div>
<div class="line">  &quot;variable_name&quot;: &quot;Power&quot;,</div>
<div class="line">  &quot;characteristics&quot;: {</div>
<div class="line">    &quot;unit&quot;: &quot;W&quot;,</div>
<div class="line">    &quot;maxLimit&quot;: 22000,</div>
<div class="line">    &quot;supportsMonitoring&quot;: true,</div>
<div class="line">    &quot;dataType&quot;: &quot;decimal&quot;</div>
<div class="line">  },</div>
<div class="line">  &quot;attributes&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;type&quot;: &quot;Actual&quot;,</div>
<div class="line">      &quot;mutability&quot;: &quot;ReadOnly&quot;</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;type&quot;: &quot;MaxSet&quot;,</div>
<div class="line">      &quot;mutability&quot;: &quot;ReadOnly&quot;</div>
<div class="line">    }</div>
<div class="line">  ],</div>
<div class="line">  &quot;monitors&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;value&quot;: 21950,</div>
<div class="line">      &quot;severity&quot;: 1,</div>
<div class="line">      &quot;transaction&quot;: false,</div>
<div class="line">      &quot;type&quot;: &quot;UpperThreshold&quot;,</div>
<div class="line">      &quot;config_type&quot;: &quot;HardWiredMonitor&quot;</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;value&quot;: 100,</div>
<div class="line">      &quot;severity&quot;: 1,</div>
<div class="line">      &quot;transaction&quot;: false,</div>
<div class="line">      &quot;type&quot;: &quot;LowerThreshold&quot;,</div>
<div class="line">      &quot;config_type&quot;: &quot;HardWiredMonitor&quot;</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;value&quot;: 100,</div>
<div class="line">      &quot;severity&quot;: 1,</div>
<div class="line">      &quot;transaction&quot;: false,</div>
<div class="line">      &quot;type&quot;: &quot;Delta&quot;,</div>
<div class="line">      &quot;reference_value&quot;: &quot;10700&quot;,</div>
<div class="line">      &quot;config_type&quot;: &quot;PreconfiguredMonitor&quot;</div>
<div class="line">    }</div>
<div class="line">  ],</div>
<div class="line">  &quot;description&quot;: &quot;&quot;,</div>
<div class="line">  &quot;type&quot;: &quot;number&quot;,</div>
<div class="line">  &quot;default&quot;: &quot;0&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p >In the example for the 'EVSEPower' variable that supports monitoring there were attached three hardwired and preconfigured monitors. The monitors will report (based on the setup, see the <code>Basic Configuration</code> section) to the CSMS when the power will exceed '21950' W, when the power will fall below '100' W and when there will be a delta difference of more than <code>100</code> W from the <code>reference_value</code> in the case of the delta monitor. When the delta is exceeded the <code>reference_value</code> will be updated internally, and a new delta will be calculated based on that.</p>
<p >For more information related to the monitor functionality, please refer to the OCPP201 specification.</p>
<p >Note: for a delta monitor, an initial <code>reference_value</code> must be provided or the library will fail to initialize. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
